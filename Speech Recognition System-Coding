#include <SoftwareSerial.h>
#include "VoiceRecognitionV3.h"

VR myVR(2, 3);   // RX, TX

uint8_t records[7]; // save record
uint8_t buf[64];

#define ON_CMD   0
#define OFF_CMD  1

int device = 13;

void setup()
{
  Serial.begin(9600);
  myVR.begin(9600);

  pinMode(device, OUTPUT);
  digitalWrite(device, LOW);

  Serial.println("Speech Recognition System");

  if (myVR.clear() == 0) {
    Serial.println("Recognizer cleared.");
  }

  myVR.load((uint8_t)ON_CMD);
  myVR.load((uint8_t)OFF_CMD);
}

void loop()
{
  int ret = myVR.recognize(buf, 50);

  if (ret > 0) {
    switch (buf[1]) {

      case ON_CMD:
        digitalWrite(device, HIGH);
        Serial.println("Device ON");
        break;

      case OFF_CMD:
        digitalWrite(device, LOW);
        Serial.println("Device OFF");
        break;

      default:
        Serial.println("Unknown Command");
        break;
    }
  }
}
